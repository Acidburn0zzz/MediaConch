<h1 id="preforma-mediainfo">PreForma MediaInfo</h1>
<p>Project Acronym: PREFORMA</p>
<p>Grant Agreement number: 619568</p>
<p>Project Title: PREservation FORMAts for culture information/e-archives</p>
<p>Prepared by: - MediaArea SARL -- Jérôme Martinez -- Dave Rice -- Tessa Fallon -- Ashley Blewer -- Erik Piil -- Guillaume Roques</p>
<p>Prepared for:</p>
<p>Date: December 31, 2014</p>
<p>Licensed under: Creative Commons CC-BY v4.0</p>
<h2 id="summary">Summary</h2>
<p>This reports serves as a snapshot of MediaArea's research, planning, and design work to develop a conformance checker, tentatively entitled PreForma MediaInfo.# Architectural Layers</p>
<p>The design of the conformance checker portion of the PreForma MediaInfo application will be comprised of several layers which will communicate via a Hypervisor. The layers shall include:</p>
<ul>
<li>Input Layer</li>
<li>Container Conformance Check</li>
<li>Container Demuxer</li>
<li>Stream Conformance Check</li>
<li><p>Stream Coherancy Check</p></li>
<li>Stream Decoding (through plugin)</li>
<li>Baseband Analysis (through plugin)</li>
<li><p>Playback and Playback Analysis (through plugin)</p></li>
</ul>
<p>Note that the PreForma tender does not require decoding or subsequent baseband analysis or playback; however, from our experience in conformance checker design with DV Analyzer and QCTools and through discovery interviews, we've found that users are quick to require some form of playback in order to facilitate decision-making, response, and strategies for fixing. For instance if the conformance checker warns that the Matroska container and FFV1 codec note contradictory aspect ratios or a single FFV1 frame registers a CRC mismatch it is intuitive that the user would need to decode the video to determine which aspect ratio is correct or to assess the impact of the CRC mismatch. These layers can be supporting by designing a conformance checker and shell that is prepared to utilize FFmpeg as an optional plugin to enable additional analysis features and playback. Our overall proposal is not dependent on supporting an FFmpeg plugin but we believe that preparing a conformance checker that could support FFmpeg as an optional plugin could create a more intuitive, comprehensive, and informed user experience.</p>
<p>We propose incorporating several compatible utilities into PreForma MediaInfo to extend functionality and add immediate convenience for users. Each component is built as a plugin and can be replaced by a third party tool.</p>
<h2 id="transport-layer">Transport layer</h2>
<h3 id="preforma-mediainfo-file-on-disk-or-direct-memory-mapping">Preforma MediaInfo: File on disk or direct memory mapping</h3>
<p>Preforma MediaInfo natively offers a file API for each operating system to enable direct file access, including files that are still in the process or being written. The inclusion of MediaInfo also offers features for direct memory mapping which will be useful for third-party development or plugins.</p>
<h3 id="plugin-integration-proof-of-concept-libcurl">Plugin integration proof of concept: libcURL</h3>
<p>libcURL is licensed under an MIT license that is compatible with both GPLv3+ and MPLv2+. curl offers extensive support for transferring data through many protocols. By incorporating curl into PreForma MediaInfo the tool will be able to assess files that may be accessible online by providing a URL (or list of URLs) in place of a filepath.</p>
<p>Since we will be generating a library of reference and sample files that will include large audiovisual files, users will be able to assess reference files without necessarily needing to download them.</p>
<p>Used as a proof of concept of plugin integration:<br />HTTP/HTTPS/FTP/FTPS support via MediaInfo Open-Source GPLv3+/MPL2+ and libcurl (MIT license, compatible with GPLv3+/MPL2+)</p>
<h2 id="containerwrapper-implementation-checker">Container/Wrapper implementation checker</h2>
<h3 id="preforma-mediainfo-matroska-checker">Preforma MediaInfo: Matroska checker</h3>
<h3 id="plugin-integration-proof-of-concept-mkvalidator">Plugin integration proof of concept: mkvalidator</h3>
<p>mkvalidator is a basic and no more maintained Matroska checker (BSD license, compatible with GPLv3+/MPL2+) which will be used mostly for demonstration of the plugin integration.</p>
<h2 id="containerwrapper-demultiplexing">Container/Wrapper Demultiplexing</h2>
<h3 id="preforma-mediainfo-1">Preforma MediaInfo</h3>
<p>PreForma MediaInfo will utilizing MediaInfo's existing demuxing libraries which will allow for PreForma's selected video codecs, FFV1 and JPEG2000, to be assessed from within many formats founds within archives although these container formats themselves aren't the focus of the current PreForma project. Through discovery interviews with archives and vendors we have found FFV1's archival implementations to use a variety of container formats such as AVI and QuickTime as well as Matroska. In order to allow developed tools to support FFV1 even if not contained within Matroska, PreForma MediaInfo will support the following formats for demuxing (though not necessarily for conformity (yet)): - MXF (commonly found within memory institutions) - MOV/MP4 (often found containing FFV1, JPEG2000, and LPCM) - DV (video stream format which uses LPCM) - AVI (used with FFV1 by DV Profession, NOA, Austria Mediathek) - WAV (a common container for LPCM)</p>
<p>By supporting the demultiplexing of these formats through MediaInfo, the developed tools will be applicable to a wide variety of files that contain PreForma's selected codecs: FFV1, JPEG2000, and LPCM. This demultiplexing support can be available through MediaInfo's existing libraries in a manner that is compatible with PreForma's licensing requirements.</p>
<h3 id="plugin-integration-proof-of-concept-ffmpeg">Plugin integration proof of concept: FFmpeg</h3>
<p>FFmpeg is one of the most ubitiquous, comprehensive, and open tools for demultiplexing and decoding audiovisual data; however, although FFmpeg's GPLv2+ license is compatible with PreForma's selected GPLv3+ license, it is not compatible with PreForma's other selected license, MPLv2+. As the PreForma conformance project evolves to support additional formats and codecs through plugins the use of FFmpeg's features are expected to becoming more and more appealing. For instance the integration of FFmpeg can provide integration of very comprehensive decoding and demultiplexing support beyond what can be easily provided with MediaInfo's demuxing libraries. FFmpeg's libavfilter library also provides access to waveform monitoring, vectorscope, audio meters, and other essential audiovisual inspection tools.</p>
<p>Although PreForma MediaInfo won't incorporate FFmpeg in order to comply with the MPLv2+ licensing requirement, we would like to design plugin support for FFmpeg. In this way a memory institution using PreForma MediaInfo could separately download FFmpeg and link the two together to enable additional tools such as: - Video Waveform Monitor - Vectorscope - Ability to inspect luminance and chroma planes separately - Audio Meters</p>
<p>We anticipate that the implementation of FFmpeg plugin support will substantially simplify the development of other plugins for broader codec and format support so that an entire decoder or demuxer does not need to be written from scratch in order to extend support.</p>
<h2 id="stream-essence-implementation-checker">Stream / Essence implementation checker</h2>
<h3 id="preforma-mediainfo-2">Preforma MediaInfo:</h3>
<ul>
<li>FFV1</li>
<li>PCM (including D-10 Audio, AES3)</li>
</ul>
<h3 id="plugin-integration-proof-of-concept-jpylyzer">Plugin integration proof of concept: jpylyzer</h3>
<p>For JPEG 2000 (GPLv3+ license, compatible with GPLv3+ but not with MPL2+)</p>
<h3 id="plugin-integration-proof-of-concept-dv-analyzer">Plugin integration proof of concept: DV Analyzer</h3>
<p>For DV (BSD license, compatible with GPLv3+ and MPL2+)</p>
<h3 id="optional">Optional</h3>
<ul>
<li>MPEG-1/2 Video (including IMX, AS-07, D-10 Video, FIMS…)</li>
<li>H.264/AVC (including AS-07)</li>
<li>Dirac</li>
<li>AC-3 (including AS-07)</li>
<li>MPEG 1/2 Audio</li>
<li>AAC</li>
<li>Any other essence format on sponsor request (we have skills in DV, VC-1, VC-3, MPEG-4 Visual, H.263, H.265/HEVC, FLAC, Musepack, Wavepack, , BMP, DPX, EXR, JPEG, PNG, SubRip, WebVTT, N19/STL, TTML…)</li>
</ul>
<h2 id="containerwrapper-vs-stream-essence-coherency-checker">Container/Wrapper vs Stream / Essence coherency checker</h2>
<h3 id="preforma-mediainfo-3">Preforma MediaInfo</h3>
<p>PreForma MediaInfo will support the coherency check between all suppoted formats (see Container/Wrapper implementation checker and Stream / Essence implementation checker parts)</p>
<h2 id="stream-essence-decoder">Stream / Essence decoder</h2>
<h3 id="preforma-mediainfo-4">Preforma MediaInfo</h3>
<ul>
<li>PCM (including D-10 Audio, AES3)</li>
</ul>
<h3 id="plugin-integration-proof-of-concept-ffmpeg-1">Plugin integration proof of concept: FFmpeg</h3>
<p>FFmpeg decoder (GPLv2+ license, compatible with GPLv3+ but not with MPL2+)</p>
<h3 id="plugin-integration-proof-of-concept-openjpeg">Plugin integration proof of concept: OpenJPEG</h3>
<p>OpenJPEG decoder (BSD license, compatible with GPLv3+/MPL2+)</p>
<h2 id="baseband-analyzer">Baseband analyzer</h2>
<h3 id="preforma-mediainfo-5">Preforma MediaInfo</h3>
<ul>
<li>None (only creation of the API)</li>
</ul>
<h3 id="plugin-integration-proof-of-concept-qctools">Plugin integration proof of concept: QCTools</h3>
<p>QCTools graphs (report on and graph data documenting video signal loss, flag errors in digitization, identify which errors and artifacts are in original format and which resulted from the digital transfer based on all the data collected in the past.)</p>
<h2 id="controler">Controler</h2>
<p>Communication between all plugins - Shudeling - Statistics - Reporting - User management - Policies management - Human interface - Command line interface - GUI (based on Qt) - Web UI (server/client)</p>
<h2 id="ideas-to-put-in-the-final-doc">Ideas to put in the final doc</h2>
<p>We are Open-Source natives: we do Open-Source since the first days. We have an Open-Source business model based on sponsored support (bug correction and feature requests). We don’t do Open-Source only because Performa wants it, we believe in Open-Source. We are open to Open-source and non Open-Source (we can do non Open-source small developments on request, depending of the business model of the sponsor) Do other project think to demux (e.g. how do they plan to analyze JPEG 2000 in MOV)?</p>
<p>We are already involved in Open-Source with MediaInfo and recognized as it, e.g. we are officially provided by Open Source distros: - Debian: https://packages.debian.org/wheezy/mediainfo - Ubuntu: http://packages.ubuntu.com/utopic/mediainfo - RedHat / Fedora: https://apps.fedoraproject.org/packages/mediainfo - OpenSuse: http://packman.links2linux.org/package/mediainfo - Arch Linux: https://www.archlinux.org/packages/?q=mediainfo - FreeBSD: http://www.freshports.org/multimedia/mediainfo/</p>
<p>We see 4 projects: Text, Image, A/V except JPEG 2000, JPEG 2000. Only 3 selected entities for phase 2 (3-5 written in call to tender, 3 written in kickoff meeting report)?</p>
<p>Test files; - PDF/A files buggy files: http://www.pdfa.org/2011/08/isartor-test-suite/ - JPEG 2000 files: https://github.com/openplanets/jpylyzer-test-files - Matroska buggy files: Homemade + request to Matroska mailing list - FFV1 buggy files: Homemade+ request to FFmpeg mailing list</p>
<h1 id="intended-behavior-of-the-software-documented-by-use-cases">Intended Behavior of the Software Documented by Use Cases</h1>
<h2 id="overview">Overview</h2>
<p>[[OAIS introduction]]</p>
<h2 id="conformance-checking-at-creation-time">Conformance Checking at Creation Time</h2>
<h2 id="conformance-checking-at-transfer-time">Conformance Checking at Transfer Time</h2>
<h2 id="conformance-checking-at-digitization-time">Conformance Checking at Digitization Time</h2>
<h3 id="verification-of-lossless-digitization">Verification of Lossless Digitization</h3>
<p>Until recently audiovisual digitization required a fairly inflexible set of hardware requirements and extremely limited possibilities for an open source approach to video digitization. Due to the bandwidth and processing requirements for the digitization of standard definition video required the installation of PCI cards and often the use of hardware encoders that were designed to encode video as fast as the video was being received to codecs like MPEG2 or JPEG2000. With modern connectivity options such as USB 3 and Thunderbolt it is easier to add video digitization capabilities to modern computers. Additionally modern computer processers can now transcode video losslessly in software from a video input without the need to rely on proprietary hardware-based encoders. Open source solutions such as DVA Profession, bmdcapture, and FFmpeg along with the open provision of video digitization software development kits, such as the Blackmagic SDK are facilitating new open development projects for archival video digitization.</p>
<p>As vendors and memory institutions are increasing considering and implementing digitization workflows that encode video directly to lossless codecs with the use of an intermediate file-based uncompressed audiovisual data, it is increasingly crucial to assess this lossless file soon after creation to detect any flaws within the digitization process.</p>
<p>For those digitizing video through processes that incorporate libav or FFmpeg such as bmdcapture of FFmpeg's decklink integration, a separate framemd5 may be written alongside the encoded ffv1 data. The resulting ffv1 data may then be verified against the framemd5 to verify that the correct bits were written to disk.</p>
<p>An inspiration for the use of framemd5 reports within a digitization workflow is inspired by the verify option with the flac utility available at http://flac.sourceforge.net/. The ‘-V’ or –verify command is used to decode the encoded stream in parallel to the encoding process to double-check the losslessness of the transcoding. With this method any discrepancy between what data is read and transcoded versus what data is written to disk could be identified in a subsequent verification process. The use of framemd5 data within a digitization workflow enables verification in cases where an option similar to flac's --verify argument isn't available.</p>
<h3 id="assessment-of-vendor-deliverables">Assessment of Vendor Deliverables</h3>
<p>For archives that clarify specifications for audiovisual digitization projects, the conformance checker should facilitate a workflow for the archivist to express those specifications and verify received material against them. In addition to testing for the presence and order of required metadata tags the conformance checker should also be able to verify that they adher to particular patterns as expressed through regular expressions.</p>
<p>The conformance checker should be able to verify that files were transferred completely and that the delivered material does not contain any partial files from an incomplete or aborted transfer.</p>
<h2 id="conformance-checking-at-migration-time">Conformance Checking at Migration Time</h2>
<h3 id="fixity-verification">Fixity Verification</h3>
<p>Migration of large amounts of data introduce risk for digital corruption, sector loss. Ongoing data migration is essential for digital preservation but can require time consuming verification process. Both Matroska and FFV1 contain features for internal fixity, so that a file copied from point A to point B can be assessed at point B alone to verify the data integrity of the frames. MediaArea recommends uses Matroska's CRC features for use in digital preservation to allow for fixity verification to be more stable and achievable with the file alone without necessarily depending on external databases or records of checksums.</p>
<h3 id="obsolescence-monitoring">Obsolescence Monitoring</h3>
<p>Migration is typically an ideal time to perform obsolescence monitoring and preparing actions to limit complications in obsolescence status. Just as memory institutions must maintain the technology that their physical collections are dependent upon, this is equally true for digital collections. As this maintainance becomes more complex, costly, or unlikely archives will typically reformat material (with as little compromise to the content and characteristics of the source as possible) to a format that has more sustainable characteristics.</p>
<p>To counteract arising obsolescence challenges it is critical to have access to thorough sets of technical metadata in order to associate certain codecs, formats, or technologies with sustainability risks or to identify what one format should be superceded by another in a particular digital preservation. For instance an institution that utilized FFV1 version 0 as a lossless preservation codec may wish to identify such files to reformat them to FFV1 version 3 (now that it is non-experimental) in order to take advantage of version 3's additional advantages. In our research one archive found that some digitized material received from a vendor was missing technical metadata about field dominance and had to identify exactly which materials were affected to order to rectify the issue.</p>
<h1 id="introduction-of-formats">Introduction of Formats</h1>
<h2 id="matroska">Matroska</h2>
<p>Matroska is a open-licensed audiovisual container format with extensive and flexible features and an active user community. The format is supported by a set of core utilities for manipulating and assessing Matroska files, such as mkvtoolnix and mkvalidator.</p>
<p>Matroska is based on EBML, Extensible Binary Meta Language. An EBML file is comprised of one of many &quot;Elements&quot;. Each element is comprised of an identifier, a value that notes the size of the element's data payload, and the data payload itself. The data payload can either be stored data or more nested elements.</p>
<p>Matroska integrates a flexible and semantically comprehensive hierarchical metadata structure as well as digital preservation features such as the ability to provide CRC checksums internally per selected elements.</p>
<h2 id="ffv1">FFV1</h2>
<p>FFV1 is a efficient lossless video codec which is designed in a manner responsive to the requirements of digital preservation. Version 3 of this lossless codec is highly self-descriptive and stores its own information regarding field dominence, aspect ratio, and colorspace so that it is not reliant on a container format to store this information. FFV1 version 3 mandates storage of CRCs in frame headers to allow verification of the encoded data and stores error status messages. FFV1 version 3 is also a very flexible codec allowing adjustments to the encoding process based on different priorities such as size efficiency, data resillience, or encoding speed.</p>
<h2 id="linear-pcm">Linear PCM</h2>
<h1 id="development-of-an-open-source-conformance-checker">Development of an Open Source Conformance Checker</h1>
<p>The conformance checker developed within the PreForma project must document and associate conformance rules with data types (such as containers or frames) and authorities (such as specifications, community practices, or the local rules of a memory institution). This design document focuses particularly on Matroska, FFV1, and LPCM.</p>
<h2 id="design-considerations">Design Considerations</h2>
<h3 id="interfaces">Interfaces</h3>
<p>The selected formats (MKV, FFV1, and LPCM) represent substantially distinct concepts: container, video, and audio. The optimization of a conformance checker should utilize distinct interfaces to address the conformance issues of these formats, but allow the resulting information to be summarized together.</p>
<p>An interface for assessing conformance of FFV1 video should enable review of the decoded FFV1 frames in association with conformance data so that inconsistencies or conformity issues may be reviewed in association of the presentation issues it may cause.</p>
<p>MediaArea proposes an interface to present conformity issues for audio and video streams (FFV1 and LPCM) on a timeline, so that conformance events, such as error concealment or crc validation issues may be reviewed effectively according to presentation, parent Matroska block element, or video frame.</p>
<p>The Matroska container requires a distinct interface that allows for its hierarchical structure to be reviewed and navigated. The presentation should allow for MKV elements to be expanded, condensed, or filtered according to element id or associated conformity issues.</p>
<h3 id="optimization-for-large-file-size">Optimization for Large File Size</h3>
<p>Design of a conformance checker should be considerate of the large file sizes associated with video. For instance, an hour-long PAL FFV1 file (which contains 90,000 frames per hour) should provide efficient access if cases where one FFV1 frame contains a CRC validation error.</p>
<p>A video conformance checker should be well optimized and multi-threaded to allow for multiple simultaneous processing on video files. Additionally the conformance checker should allow a file to be reviewed even as it is being processed by the conformance checker.</p>
<h2 id="compliance-with-standard-specifications">Compliance with Standard Specifications</h2>
<h2 id="compliance-with-community-driven-implementation-standards">Compliance with Community-Driven Implementation Standards</h2>
<h2 id="compliance-with-local-institutional-criteria">Compliance with Local Institutional Criteria</h2>
<h2 id="performance-of-fixes">Performance of Fixes</h2>
<p>Substantial care should be exercised to ensure that the Conformance Checker properly associates risk, user warnings, and assessments with each fix allowed. In order to allow a fix the software must properly understand and classify what may be fixed and be aware of how the result may be an improvement. Adjustments directly to a preservation file must be handled programmatically with great caution with diligent levels of information provided to the user.</p>
<p>An example of a fix that could be enabled in the RIFF format could be verifying that any odd-byte length chunk is properly followed by a null-filled byte. Odd-byte length chunks that do not adhere to this rule cause substantial interoperability issues with data in any chunk following the odd-byte length one (this is particularly found in 24 bit mono WAV files). If the odd-byte length chunk is not followed by a null-filled padding byte, then most typically the next chunk starts where the padding byte is and the padding byte may be inserted so that other following chunks increase their offset by one byte. This scenario can be verified by testing chunk id and size declaration of all following bytes so that the software may know beforehand if the fix (inserting the null-filled padding byte) will succeed in correcting the RIFF chunk structure’s adherence to its specification.</p>
<p>Fixes for Matroska files could include fixing metadata tags that don’t include a SimpleTag element or re-clustering frames if a cluster does not start on a keyframe.</p>
<h2 id="focus-on-fixity">Focus on Fixity</h2>
<p>Both FFV1 and Matroska provide fixity features that serve the objectives of digitial preservation by allow data to be independently validated without the requirement of managing an external checksumming process. FFV1 version 3 mandates CRC's on each frame. Matroska documents methods to embed checksums in Matroska elements to allow for future validation of any content.</p>
<p>Although the Matroska specification states that &quot;All level 1 elements should include a CRC-32&quot; this is not the practice of most Matroska multiplexers. As part of the Fixer aspect of this project, MediaArea proposes to develop a conformance checker that allows users to add CRC-32 to selected elements.</p>
<p>The advantages of embedded fixity in preservation media files is significant. The use of traditional external checksums does not scale fairly for audiovisual files, because since the file sizes are larger than non-audiovisual files there are less checksums per byte, which creates challenges in addressing corruption. By utilizing many checksums to protect smaller amounts of data within a preservation file format, the impact of any corruption may be associated to a much smaller digital area than the entire file (as the case with most external checksum workflows).</p>
<h1 id="ecosystem-around-open-source-reference-implementation">Ecosystem around Open Source Reference Implementation</h1>
<h2 id="feedback-and-reporting">Feedback and Reporting</h2>
<h2 id="advance-improvement-of-standard-specification">Advance Improvement of Standard Specification</h2>
<h3 id="ffv1-specification">FFV1 Specification</h3>
<p>Efforts to create an FFV1 specification began in April 2012, continuing through the August 2013 release of FFV1 version 3. Currently the specification remains in development at http://github.com/ffmpeg/ffv1. Ideally a specification should fully inform the development of a decoder or parser without the need to reference existing implementations (such as the ffv1 implementations within ffmpeg and libav); however MediaArea's initial research and prototyping efforts with FFV1 found the current specification insufficient to create a decoder. As a result MediaArea utilized ffmpeg’s FFV1 implementation to fully interpret the specification. Several threads on the ffmpeg-devel and libav-devel listserv reference discussions about the development of the FFV1 specification and consideration of efforts to standardize the specification through a standards organization, such as IETF (Internet Engineering Task Force) <a href="http://matroska.org/technical/specs/rfc/index.html">1</a>.</p>
<p>In consideration of FFV1’s utilization within preservation contexts, the standardization of the codec through an open standards organization would better establish FFV1 as a trustworthy, stable, and documented option. At the moment FFV1 can be seen at a tipping point in its use within preservation context. It’s speed, accessibility, and digital preservation features make it an increasingly attractive option for lossless video encoding that can be found in more and more large scale projects; the standardization of FFV1 through an open standards organization would be of broad interest to digital preservation communities and facilitate greater accessibility of lossless encoding options that are both efficient and standardization.</p>
<p>MediaArea proposes working closely with the lead authors of the FFV1 specification in order to update the current FFV1 specification to increase its self-reliance and increase its clarity. Development of the FFV1 specification early within the PreForma project will generate substantial feedback to the authors of the specification which could then be offered through the specification’s github page via pull requests or the issue tracker. MediaArea proposes at a later stage of development that the Preforma project serve as a catalyst to organize, facilitate, and sponsor the IETF standardization process for FFV1.</p>
<p>Considering the 2 year timeline of the PreForma project and usual pace of IETF standardization projects, we proprose at least submitting FFV1 as an Independent Submission to IETF which could provide workable timeline, encourage a detailed review process, and assign a formal RFC number to the specification.</p>
<h3 id="matroska-specification">Matroska Specification</h3>
<p>Both the Matroska specification and its underlying specification for EBML are at mature and stable stage with thorough documentation and existing validators, but several efforts of the PreForma project can serve as contributions to this specifications. The underlying EBML specification <a href="http://matroska.org/technical/specs/rfc/index.html">1</a> has already been drafted into RFC format but is has not yet been submitted to IETF as an Independent Submission or otherwise.</p>
<p>Matroska has a detailed metadata specification at http://www.matroska.org/technical/specs/tagging/index.html. Each tag has an official name and description while provides rules and recommendations for use. Many of these tags could be associated with validation rules, such as expressed by regular expression to assure that the content of the tag conforms to expectations. For instance tag such as URL, EMAIL, or ISBN have specific allowable patterns for what may be contained. As part of build a conformance tool for Matroska, MediaArea will generate conformance tests for individual tags and these tests may be contributed back to the Matroska specification in a list of regex values, an XML schematron file, or other acceptable contribution method.</p>
<h3 id="other-suggested-improvements-or-contributions-to-standard-specifications">Other Suggested Improvements or Contributions to Standard Specifications</h3>
<p>Register an official mime type via IETF for Matroska.</p>
<p>Register dedicated FFV1 codecid with Matroska (current use is via fourcc).</p>
<p>Proposal of a tagging extension to Matroska based on the requirements of the digital preservation community.</p>
<p>Feedback for features and functions of FFV1 version 4, which is currently under development.</p>
<p>Creation of metadata translators to convert common descriptive metadata formats within memory institution. For instance convert EBUCore into the XML representation of the Matroska tagging specification so that such metadata may be easily imported and exported between EBUCore and Matroska.</p>
<h2 id="advance-business-cases-for-managing-preservation-files">Advance Business Cases for Managing Preservation Files</h2>
<h2 id="style-guide"># Style Guide</h2>
<h1 id="source-code-guide">Source Code Guide</h1>
<h2 id="portability">Portability</h2>
<p>Source code MUST be built for portability between technical deployment platforms.</p>
<h2 id="modularity">Modularity</h2>
<p>Source code MUST be built in a modular fashion for improved maintainability.</p>
<h2 id="deployment">Deployment</h2>
<p>The Conformance Checker MUST allow for deployment in these five infrastructures/environments: The PREFORMA website, an evaluation framework, a stand-alone system, a network-based system, and legacy systems.</p>
<p>To sufficiently demonstrate the scope and functionality of the Conformance Checker, it, along with associated documentation and guidelines, must be made available at the PREFORMA project website. The PREFORMA website will be considered as the deliverable for the PREFORMA project.</p>
<p>In order to gather sufficient structured feedback on the conformance checking process, the Conformance Checker will require deployment within the DIRECT infrastructure for test and evaluation of the tool in the PCP procedure.</p>
<p>The Conformance Checker must have the capability to be packaged and run as an executible on a PC running any standard operating system (at least for: MS Windows 7, Mac OSX, common Linux distributions such as Ubuntu, Fedora, Debian, and Suse). This ensures the conformance checker can be used in small-scale institutions without centralized IT infrastructure.</p>
<p>The Conformance Checker must allow for deployment in network-based solutions (dedicated server, cloud solutions) for digital repositories.</p>
<p>The Conformance Checker must have the capability of being plugged into legacy systems via written API integration.</p>
<h2 id="apis">API's</h2>
<p>The Conformance Checker MUST interface with other software systems via API’s.</p>
<h1 id="open-source-practices">Open Source Practices</h1>
<h2 id="development">Development</h2>
<p>Development of software in open source projects in PREFORMA MUST utilise effective open source work practices. Effective open source work practices include:</p>
<ul>
<li>use of nightly builds Nightly builds are automated neutral builds that reflect the current, most up-to-date status of a piece of developed software. Access made to nightly builds allow for groups of developers to work collaboratively and always assess the most current state of the software, with consideration to potential bugs or other hazards that could occur during the development process. Programmers are able to confidently determine if they &quot;broke the build&quot; (made the software inoperable) with their code and prevent or correct changes quickly, as needed.</li>
<li>use of software configuration management systems (e.g. Git) Using a software configuration management system allow for version and revision control, an essential component to developers working collaboratively. A version control system allows multiple people to work on same or similar sections of the source code base at the same time with awareness and prevention of overlapping or conflicting work. Git will be used as the software configuration management system for this project.</li>
<li>use of an open platform for open development (e.g. Github) An open platform on which to develop software facilitates the open development of that software. Public visibility and ability to contribute to the software by anyone allows for heartier, more reliable software. Feedback is more easily sought and more readily provided with the use of an open platform. Github will be used as the open platform for open development of this project.</li>
</ul>
<h2 id="open-source-platforms">Open Source Platforms</h2>
<p>All development of software and all development of digital assets (related to developed open source software) in PREFORMA MUST be conducted and provided in open source projects at open development platforms.</p>
<h1 id="contribution-guide">Contribution Guide</h1>
<h2 id="file-naming-conventions">File Naming Conventions</h2>
<p>Files related to documentation should be named in CamelCase. Sample data should be added in snake_case with a sufficiently descriptive title.</p>
<p>Commit messages should concisely summarize the contribution. Commits should be cohesive and only include changes to relevant files (e.g. do not fix a typo in the Style Guide, change scope paramaters, and fix a bug all in the same commit).</p>
<h2 id="rules-for-qtc-code">Rules for Qt/C++ code:</h2>
<p>4 spaces are used for indentation. Tabs are never used.</p>
<p>For more guidelines, refer to the Qt Coding Style guide: http://qt-project.org/wiki/Qt_Coding_Style For even more guidelines, Google guide on C++: http://google-styleguide.googlecode.com/svn/trunk/cppguide.html</p>
<h2 id="rules-for-contributing-code">Rules for contributing code</h2>
<p>Contributions of code or additions to documentation must be written with Qt and must be made in the form of a branch submitted as a pull request.</p>
<ol style="list-style-type: decimal">
<li>Fork this repository (https://github.com/MediaArea/PreFormaMediaInfo/fork)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Added some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request with a more verbose description of the proposed changes</li>
</ol>
<h2 id="rules-for-contributing-feedback">Rules for contributing feedback</h2>
<p>Feedback of all kind is encouraged and can either be made through <a href="https://github.com/MediaArea/PreFormaMediaInfo/issues">opening an issue</a> or by contacting the team directly at info@mediaarea.net</p>
<h2 id="linking">Linking</h2>
<p>In order to facilitate self-description, intuitive discovery, and use of resulting code and documentation it is highly encouraged to utilize linking through documentation, tickets, commit messages, and within the code. For instance the registry itemizes individual conformance checks should link to code blocks and/or commits as software is developed that is associated to that conformance check. In this manner it should be feasible to easily review both human-readable descriptions of conformity checks and associated programmatic implementations.</p>
<h1 id="license">License</h1>
<p>The software and digital assets delivered by tenderer are made available under the following IPR conditions:</p>
<p>All software developed during the PREFORMA project MUST be provided under the two specific open source licenses: “GPLv3 or later” and “MPLv2 or later”.</p>
<p>All source code for all software developed during the PREFORMA project MUST always be identical between the two specific open source licenses (“GPLv3 or later” and “MPLv2 or later”).</p>
<p>All digital assets developed during the PREFORMA project MUST be provided under the open access license: Creative Commons CC-BY v4.0 and in open file formats, i.e. an open standard as defined in the European Interoperability Framework for Pan-European eGovernment Service (version 1.0 2004)</p>
